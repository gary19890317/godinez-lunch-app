/*
Created: 06/01/2016
Modified: 07/01/2016
Model: Oracle 11g Release 1
Database: Oracle 11g Release 1
*/


-- Create tables section -------------------------------------------------

-- Table FONDA

CREATE TABLE "FONDA"(
  "ID_FONDA" Number(10,0) NOT NULL,
  "NOMBRE" Varchar2(30 ) NOT NULL,
  "DIRECCION" Varchar2(100 ) NOT NULL,
  "TELEFONO" Varchar2(30 ),
  "HABILITADO" Number(10,0) NOT NULL,
  "HORARIO_APERTURA" Timestamp(6) NOT NULL,
  "HORARIO_CIERRE" Timestamp(6) NOT NULL
)
/

-- Add keys for table FONDA

ALTER TABLE "FONDA" ADD CONSTRAINT "Key1" PRIMARY KEY ("ID_FONDA")
/

-- Table SUSCRIPCION

CREATE TABLE "SUSCRIPCION"(
  "ID_FONDA" Number(10,0) NOT NULL,
  "FECHA_PAGO" Timestamp(6) NOT NULL,
  "FECHA_TERMINO" Timestamp(6) NOT NULL,
  "AL_CORRIENTE" Number(10,0) NOT NULL
)
/

-- Add keys for table SUSCRIPCION

ALTER TABLE "SUSCRIPCION" ADD CONSTRAINT "Key3" PRIMARY KEY ("ID_FONDA")
/

-- Table COMIDA

CREATE TABLE "COMIDA"(
  "ID_COMIDA" Number(10,0) NOT NULL,
  "DESCRIPCION" Varchar2(50 ) NOT NULL,
  "PRECIO" Number(10,0) NOT NULL
)
/

-- Add keys for table COMIDA

ALTER TABLE "COMIDA" ADD CONSTRAINT "Key4" PRIMARY KEY ("ID_COMIDA")
/

-- Table FONDA_COMIDA

CREATE TABLE "FONDA_COMIDA"(
  "ID_FONDA" Number(10,0) NOT NULL,
  "ID_COMIDA" Number(10,0) NOT NULL
)
/

-- Add keys for table FONDA_COMIDA

ALTER TABLE "FONDA_COMIDA" ADD CONSTRAINT "Key5" PRIMARY KEY ("ID_FONDA","ID_COMIDA")
/

-- Table PEDIDO

CREATE TABLE "PEDIDO"(
  "ID_PEDIDO" Number(10,0) NOT NULL,
  "MESA" Number(10,0) NOT NULL,
  "FECHA" Timestamp(6) NOT NULL,
  "PROPINA" Number(10,0),
  "TOTAL_PAGAR" Number(10,0) NOT NULL,
  "ID_MESERO" Number(10,0)
)
/

-- Create indexes for table PEDIDO

CREATE INDEX "IX_Relationship15" ON "PEDIDO" ("ID_MESERO")
/

-- Add keys for table PEDIDO

ALTER TABLE "PEDIDO" ADD CONSTRAINT "Key6" PRIMARY KEY ("ID_PEDIDO")
/

-- Table PEDIDO_COMIDA

CREATE TABLE "PEDIDO_COMIDA"(
  "ID_PEDIDO" Number(10,0) NOT NULL,
  "ID_COMIDA" Number(10,0) NOT NULL
)
/

-- Add keys for table PEDIDO_COMIDA

ALTER TABLE "PEDIDO_COMIDA" ADD CONSTRAINT "Key7" PRIMARY KEY ("ID_PEDIDO","ID_COMIDA")
/

-- Table MESERO

CREATE TABLE "MESERO"(
  "ID_MESERO" Number(10,0) NOT NULL,
  "NOMBRE" Varchar2(30 ) NOT NULL,
  "NOMBRE_CORTO" Varchar2(30 ) NOT NULL
)
/

-- Add keys for table MESERO

ALTER TABLE "MESERO" ADD CONSTRAINT "Key8" PRIMARY KEY ("ID_MESERO")
/

-- Table COMENTARIO

CREATE TABLE "COMENTARIO"(
  "ID_COMENTARIO" Number(10,0) NOT NULL,
  "ID_FONDA" Number(10,0) NOT NULL,
  "CALIFICACION" Number(10,0) NOT NULL,
  "COMENTARIO" Varchar2(100 ) NOT NULL,
  "FECHA" Timestamp(6) NOT NULL
)
/

-- Create indexes for table COMENTARIO

CREATE INDEX "IX_Relationship17" ON "COMENTARIO" ("ID_FONDA")
/

-- Add keys for table COMENTARIO

ALTER TABLE "COMENTARIO" ADD CONSTRAINT "Key9" PRIMARY KEY ("ID_COMENTARIO")
/

-- Create relationships section ------------------------------------------------- 

ALTER TABLE "SUSCRIPCION" ADD CONSTRAINT "FK_ID_FONDA_SUSCRIPCION" FOREIGN KEY ("ID_FONDA") REFERENCES "FONDA" ("ID_FONDA")
/

ALTER TABLE "FONDA_COMIDA" ADD CONSTRAINT "FK_ID_FONDA" FOREIGN KEY ("ID_FONDA") REFERENCES "FONDA" ("ID_FONDA")
/

ALTER TABLE "FONDA_COMIDA" ADD CONSTRAINT "FK_ID_COMIDA" FOREIGN KEY ("ID_COMIDA") REFERENCES "COMIDA" ("ID_COMIDA")
/

ALTER TABLE "PEDIDO_COMIDA" ADD CONSTRAINT "FK_ID_COMIDA_PEDIDO" FOREIGN KEY ("ID_COMIDA") REFERENCES "COMIDA" ("ID_COMIDA")
/

ALTER TABLE "PEDIDO_COMIDA" ADD CONSTRAINT "FK_ID_PEDIDO" FOREIGN KEY ("ID_PEDIDO") REFERENCES "PEDIDO" ("ID_PEDIDO")
/

ALTER TABLE "PEDIDO" ADD CONSTRAINT "FK_ID_MESERO_PEDIDO" FOREIGN KEY ("ID_MESERO") REFERENCES "MESERO" ("ID_MESERO")
/

ALTER TABLE "COMENTARIO" ADD CONSTRAINT "FK_ID_FONDA_COMENTARIO" FOREIGN KEY ("ID_FONDA") REFERENCES "FONDA" ("ID_FONDA")
/



